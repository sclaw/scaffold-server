create schema if not exists edgenode;
create table edgenode.provider (
  id bigserial primary key,
  uid text not null, 
  created timestamptz not null default now(),
  constraint "provider_uid_uniq" unique ("uid"));

create table edgenode.provider_user (
  id bigserial primary key,
  email text not null,
  status text not null,  
  provider_id int8 not null constraint "provider_user_provider_id_fk" references edgenode.provider(id),
  user_id int8 not null constraint "provider_user_user_id_fk" references auth.user(id),
  created timestamptz not null default now(),
  modified timestamptz,
  constraint "provider_user_provider_id__user_id _uniq" unique (provider_id, user_id));